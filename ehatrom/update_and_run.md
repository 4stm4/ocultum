/*
  4STM4
  ocultum
*/
# update_and_run.sh

Этот скрипт автоматизирует обновление репозитория, сборку и демонстрацию функциональности Rust-проекта ehatrom.

## Использование

1. Сделайте скрипт исполняемым:
   
   chmod +x update_and_run.sh

2. Запустите скрипт:
   
   ./update_and_run.sh

## Что делает скрипт

- **Git Pull**: Получает последние изменения из репозитория
- **Сборка**: Выполняет `cargo build` для сборки проекта
- **Создание тестовых файлов**: Запускает examples для создания EEPROM файлов
- **Тестирование**: Выполняет все тесты для проверки качества кода
- **Демонстрация CLI**: Показывает работу команды `show` с созданными файлами

## Создаваемые файлы

Скрипт создаёт тестовые EEPROM файлы:
- `tests/data/simple.eep` - простой EEPROM файл (заголовок + CRC)
- `tests/data/test.eep` - полный EEPROM файл с vendor info и GPIO mapping

## Доступные команды

После выполнения скрипта вы можете использовать:

### CLI команды:
```bash
# Показать содержимое EEPROM файла
cargo run -- show <file.eep>

# Читать EEPROM с I2C устройства (только Linux)
cargo run -- read <i2c-dev> <address> <output.bin>

# Записать EEPROM на I2C устройство (только Linux)  
cargo run -- write <i2c-dev> <address> <input.bin>
```

### Примеры создания файлов:
```bash
# Создать простой EEPROM файл
cargo run --example create_simple

# Создать полный тестовый EEPROM файл
cargo run --example create_test
```

### Тестирование и проверки:
```bash
# Запустить все тесты (16 тестов)
cargo test

# Проверить код линтером
cargo clippy

# Отформатировать код
cargo fmt
```

Все шаги выполняются последовательно, при ошибке выполнение прерывается.
